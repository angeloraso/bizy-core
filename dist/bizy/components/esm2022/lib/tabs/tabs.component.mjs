import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ContentChildren, Inject, Input, ViewChild } from '@angular/core';
import { Subject, Subscription, debounceTime } from 'rxjs';
import { BizyTabComponent } from './tab/tab.component';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export class BizyTabsComponent {
    ref;
    tabs;
    bizyTabs;
    bizyTabsWrapper;
    customClass;
    #SCROLL_STEP = 50;
    showLeftButton = false;
    showRightButton = false;
    #resizeObserver = null;
    #subscription = new Subscription();
    #resize$ = new Subject();
    #initialScroll = 0;
    constructor(ref) {
        this.ref = ref;
    }
    ngAfterViewInit() {
        this.bizyTabsWrapper.nativeElement.scrollLeft = this.#initialScroll;
        this.#resizeObserver = new ResizeObserver(() => this.#resize$.next());
        this.#resizeObserver.observe(this.bizyTabs.nativeElement);
        this.#subscription.add(this.#resize$.pipe(debounceTime(100)).subscribe(() => {
            this.#checkButtons();
        }));
    }
    ngAfterContentInit() {
        for (let i = 0; i < this.tabs.length; i++) {
            if (this.tabs.get(i).selected) {
                this.#initialScroll = this.tabs.get(i).elementRef.nativeElement.offsetLeft;
                break;
            }
        }
    }
    onScrollLeft() {
        this.bizyTabsWrapper.nativeElement.scrollLeft = this.bizyTabsWrapper.nativeElement.scrollLeft - this.#SCROLL_STEP < 0 ? 0 : this.bizyTabsWrapper.nativeElement.scrollLeft - this.#SCROLL_STEP;
        this.#checkButtons();
    }
    onScrollRight() {
        this.bizyTabsWrapper.nativeElement.scrollLeft = (this.bizyTabsWrapper.nativeElement.scrollLeft + this.#SCROLL_STEP) > this.bizyTabsWrapper.nativeElement.scrollWidth ? this.bizyTabsWrapper.nativeElement.scrollWidth : this.bizyTabsWrapper.nativeElement.scrollLeft + this.#SCROLL_STEP;
        this.#checkButtons();
    }
    #checkButtons() {
        this.showLeftButton = this.bizyTabsWrapper.nativeElement.scrollLeft > 0;
        this.showRightButton = (this.bizyTabsWrapper.nativeElement.scrollWidth - this.bizyTabs.nativeElement.offsetWidth) > 0 && (this.bizyTabsWrapper.nativeElement.scrollLeft < (this.bizyTabsWrapper.nativeElement.scrollWidth - this.bizyTabs.nativeElement.offsetWidth));
        this.ref.detectChanges();
    }
    ngOnDestroy() {
        this.#subscription.unsubscribe();
        this.#resizeObserver.disconnect();
    }
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: BizyTabsComponent, deps: [{ token: ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: BizyTabsComponent, selector: "bizy-tabs", inputs: { customClass: "customClass" }, queries: [{ propertyName: "tabs", predicate: BizyTabComponent }], viewQueries: [{ propertyName: "bizyTabs", first: true, predicate: ["bizyTabs"], descendants: true }, { propertyName: "bizyTabsWrapper", first: true, predicate: ["bizyTabsWrapper"], descendants: true }], ngImport: i0, template: "<div #bizyTabs class=\"bizy-tabs {{customClass}}\">\n\n    <button \n        type=\"button\"\n        class=\"bizy-tabs__scroll-button bizy-tabs__scroll-button--left\"\n        *ngIf=\"showLeftButton\"\n        (click)=\"onScrollLeft()\"\n        (keyup.enter)=\"onScrollLeft()\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\" class=\"bizy-tabs__scroll-button__arrow\">\n            <path d=\"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z\"/>\n        </svg>\n    </button>\n\n    <span class=\"bizy-tabs__wrapper\" #bizyTabsWrapper>\n\n        <ng-content select=\"bizy-tab\"></ng-content>\n\n    </span>\n\n    <button \n        type=\"button\"\n        class=\"bizy-tabs__scroll-button bizy-tabs__scroll-button--right\"\n        *ngIf=\"showRightButton\"\n        (click)=\"onScrollRight()\"\n        (keyup.enter)=\"onScrollRight()\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\" class=\"bizy-tabs__scroll-button__arrow\">\n            <path d=\"M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z\"/>\n        </svg>\n    </button>\n\n</div>", styles: [":host{font-size:1rem}.bizy-tabs{display:flex;width:100%;height:100%;overflow:hidden;background-color:transparent}.bizy-tabs__wrapper{display:flex;align-items:center;width:100%;height:100%;position:relative;overflow-y:hidden;overflow-x:auto;scroll-behavior:smooth;column-gap:var(--bizy-tabs-column-gap);background-color:var(--bizy-tabs-background-color)}.bizy-tabs__wrapper::-webkit-scrollbar{width:.5rem;height:.5rem}.bizy-tabs__wrapper::-webkit-scrollbar-thumb{border-radius:1rem;background-color:var(--bizy-tabs-scroll-bar-color)}.bizy-tabs__wrapper::-webkit-scrollbar-thumb:hover{background-color:var(--bizy-tabs-scroll-bar-hover-color)}.bizy-tabs__wrapper::-webkit-scrollbar-button{height:1rem}.bizy-tabs__scroll-button{width:2rem;border:none;background-color:var(--bizy-tabs-arrow-button-background-color);display:flex;align-items:center;padding:.3rem;justify-content:center;box-shadow:0 0 47px -5px #000;-webkit-box-shadow:0px 0px 47px -5px rgba(0,0,0,1);-moz-box-shadow:0px 0px 47px -5px rgba(0,0,0,1)}.bizy-tabs__scroll-button--left{border-right:.1rem solid #6666}.bizy-tabs__scroll-button--right{border-left:.1rem solid #6666}.bizy-tabs__scroll-button__arrow{height:1rem;fill:var(--bizy-tabs-arrow-button-color)}\n"], dependencies: [{ kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: BizyTabsComponent, decorators: [{
            type: Component,
            args: [{ selector: 'bizy-tabs', changeDetection: ChangeDetectionStrategy.OnPush, template: "<div #bizyTabs class=\"bizy-tabs {{customClass}}\">\n\n    <button \n        type=\"button\"\n        class=\"bizy-tabs__scroll-button bizy-tabs__scroll-button--left\"\n        *ngIf=\"showLeftButton\"\n        (click)=\"onScrollLeft()\"\n        (keyup.enter)=\"onScrollLeft()\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\" class=\"bizy-tabs__scroll-button__arrow\">\n            <path d=\"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z\"/>\n        </svg>\n    </button>\n\n    <span class=\"bizy-tabs__wrapper\" #bizyTabsWrapper>\n\n        <ng-content select=\"bizy-tab\"></ng-content>\n\n    </span>\n\n    <button \n        type=\"button\"\n        class=\"bizy-tabs__scroll-button bizy-tabs__scroll-button--right\"\n        *ngIf=\"showRightButton\"\n        (click)=\"onScrollRight()\"\n        (keyup.enter)=\"onScrollRight()\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\" class=\"bizy-tabs__scroll-button__arrow\">\n            <path d=\"M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z\"/>\n        </svg>\n    </button>\n\n</div>", styles: [":host{font-size:1rem}.bizy-tabs{display:flex;width:100%;height:100%;overflow:hidden;background-color:transparent}.bizy-tabs__wrapper{display:flex;align-items:center;width:100%;height:100%;position:relative;overflow-y:hidden;overflow-x:auto;scroll-behavior:smooth;column-gap:var(--bizy-tabs-column-gap);background-color:var(--bizy-tabs-background-color)}.bizy-tabs__wrapper::-webkit-scrollbar{width:.5rem;height:.5rem}.bizy-tabs__wrapper::-webkit-scrollbar-thumb{border-radius:1rem;background-color:var(--bizy-tabs-scroll-bar-color)}.bizy-tabs__wrapper::-webkit-scrollbar-thumb:hover{background-color:var(--bizy-tabs-scroll-bar-hover-color)}.bizy-tabs__wrapper::-webkit-scrollbar-button{height:1rem}.bizy-tabs__scroll-button{width:2rem;border:none;background-color:var(--bizy-tabs-arrow-button-background-color);display:flex;align-items:center;padding:.3rem;justify-content:center;box-shadow:0 0 47px -5px #000;-webkit-box-shadow:0px 0px 47px -5px rgba(0,0,0,1);-moz-box-shadow:0px 0px 47px -5px rgba(0,0,0,1)}.bizy-tabs__scroll-button--left{border-right:.1rem solid #6666}.bizy-tabs__scroll-button--right{border-left:.1rem solid #6666}.bizy-tabs__scroll-button__arrow{height:1rem;fill:var(--bizy-tabs-arrow-button-color)}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef, decorators: [{
                    type: Inject,
                    args: [ChangeDetectorRef]
                }] }]; }, propDecorators: { tabs: [{
                type: ContentChildren,
                args: [BizyTabComponent]
            }], bizyTabs: [{
                type: ViewChild,
                args: ['bizyTabs']
            }], bizyTabsWrapper: [{
                type: ViewChild,
                args: ['bizyTabsWrapper']
            }], customClass: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFicy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9jb21wb25lbnRzL3NyYy9saWIvdGFicy90YWJzLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbXBvbmVudHMvc3JjL2xpYi90YWJzL3RhYnMuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQW1DLHVCQUF1QixFQUFFLGlCQUFpQixFQUFFLFNBQVMsRUFBRSxlQUFlLEVBQWMsTUFBTSxFQUFFLEtBQUssRUFBYSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDekwsT0FBTyxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQzNELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDOzs7QUFRdkQsTUFBTSxPQUFPLGlCQUFpQjtJQWlCUztJQWhCRixJQUFJLENBQStCO0lBQ3ZDLFFBQVEsQ0FBYTtJQUNkLGVBQWUsQ0FBYTtJQUN6RCxXQUFXLENBQVE7SUFFNUIsWUFBWSxHQUFHLEVBQUUsQ0FBQztJQUVsQixjQUFjLEdBQVksS0FBSyxDQUFDO0lBQ2hDLGVBQWUsR0FBWSxLQUFLLENBQUM7SUFFakMsZUFBZSxHQUEwQixJQUFJLENBQUM7SUFDOUMsYUFBYSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7SUFDbkMsUUFBUSxHQUFHLElBQUksT0FBTyxFQUFRLENBQUM7SUFDL0IsY0FBYyxHQUFXLENBQUMsQ0FBQztJQUUzQixZQUNxQyxHQUFzQjtRQUF0QixRQUFHLEdBQUgsR0FBRyxDQUFtQjtJQUN4RCxDQUFDO0lBRUosZUFBZTtRQUNiLElBQUksQ0FBQyxlQUFlLENBQUMsYUFBYSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDO1FBQ3BFLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxjQUFj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LFNBQVM7K0JBQ0UsV0FBVyxtQkFHSix1QkFBdUIsQ0FBQyxNQUFNOzswQkFtQjVDLE1BQU07MkJBQUMsaUJBQWlCOzRDQWhCUSxJQUFJO3NCQUF0QyxlQUFlO3VCQUFDLGdCQUFnQjtnQkFDRixRQUFRO3NCQUF0QyxTQUFTO3VCQUFDLFVBQVU7Z0JBQ2lCLGVBQWU7c0JBQXBELFNBQVM7dUJBQUMsaUJBQWlCO2dCQUNuQixXQUFXO3NCQUFuQixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWZ0ZXJDb250ZW50SW5pdCwgQWZ0ZXJWaWV3SW5pdCwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQsIENvbnRlbnRDaGlsZHJlbiwgRWxlbWVudFJlZiwgSW5qZWN0LCBJbnB1dCwgUXVlcnlMaXN0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YmplY3QsIFN1YnNjcmlwdGlvbiwgZGVib3VuY2VUaW1lIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBCaXp5VGFiQ29tcG9uZW50IH0gZnJvbSAnLi90YWIvdGFiLmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2JpenktdGFicycsXG4gIHRlbXBsYXRlVXJsOiAnLi90YWJzLmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi90YWJzLmNzcyddLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcbmV4cG9ydCBjbGFzcyBCaXp5VGFic0NvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIEFmdGVyQ29udGVudEluaXQge1xuICBAQ29udGVudENoaWxkcmVuKEJpenlUYWJDb21wb25lbnQpIHRhYnMhOiBRdWVyeUxpc3Q8Qml6eVRhYkNvbXBvbmVudD47XG4gIEBWaWV3Q2hpbGQoJ2JpenlUYWJzJykgcHJpdmF0ZSBiaXp5VGFiczogRWxlbWVudFJlZjsgXG4gIEBWaWV3Q2hpbGQoJ2JpenlUYWJzV3JhcHBlcicpIHByaXZhdGUgYml6eVRhYnNXcmFwcGVyOiBFbGVtZW50UmVmOyBcbiAgQElucHV0KCkgY3VzdG9tQ2xhc3M6IHN0cmluZ1xuXG4gICNTQ1JPTExfU1RFUCA9IDUwO1xuXG4gIHNob3dMZWZ0QnV0dG9uOiBib29sZWFuID0gZmFsc2U7IFxuICBzaG93UmlnaHRCdXR0b246IGJvb2xlYW4gPSBmYWxzZTsgXG5cbiAgI3Jlc2l6ZU9ic2VydmVyOiBSZXNpemVPYnNlcnZlciB8IG51bGwgPSBudWxsO1xuICAjc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICAjcmVzaXplJCA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XG4gICNpbml0aWFsU2Nyb2xsOiBudW1iZXIgPSAwO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJbmplY3QoQ2hhbmdlRGV0ZWN0b3JSZWYpIHByaXZhdGUgcmVmOiBDaGFuZ2VEZXRlY3RvclJlZlxuICApIHt9XG5cbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIHRoaXMuYml6eVRhYnNXcmFwcGVyLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCA9IHRoaXMuI2luaXRpYWxTY3JvbGw7XG4gICAgdGhpcy4jcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4gdGhpcy4jcmVzaXplJC5uZXh0KCkpO1xuICAgIHRoaXMuI3Jlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy5iaXp5VGFicy5uYXRpdmVFbGVtZW50KTtcbiAgICB0aGlzLiNzdWJzY3JpcHRpb24uYWRkKHRoaXMuI3Jlc2l6ZSQucGlwZShkZWJvdW5jZVRpbWUoMTAwKSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMuI2NoZWNrQnV0dG9ucygpO1xuICAgIH0pKTtcbiAgfVxuXG4gIG5nQWZ0ZXJDb250ZW50SW5pdCgpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGFicy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMudGFicy5nZXQoaSkuc2VsZWN0ZWQpIHtcbiAgICAgICAgdGhpcy4jaW5pdGlhbFNjcm9sbCA9IHRoaXMudGFicy5nZXQoaSkuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50Lm9mZnNldExlZnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uU2Nyb2xsTGVmdCgpIHtcbiAgICB0aGlzLmJpenlUYWJzV3JhcHBlci5uYXRpdmVFbGVtZW50LnNjcm9sbExlZnQgPSB0aGlzLmJpenlUYWJzV3JhcHBlci5uYXRpdmVFbGVtZW50LnNjcm9sbExlZnQgLSB0aGlzLiNTQ1JPTExfU1RFUCA8IDAgPyAwIDogdGhpcy5iaXp5VGFic1dyYXBwZXIubmF0aXZlRWxlbWVudC5zY3JvbGxMZWZ0IC0gdGhpcy4jU0NST0xMX1NURVA7XG4gICAgdGhpcy4jY2hlY2tCdXR0b25zKCk7XG4gIH1cblxuICBvblNjcm9sbFJpZ2h0KCkge1xuICAgIHRoaXMuYml6eVRhYnNXcmFwcGVyLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCA9ICh0aGlzLmJpenlUYWJzV3JhcHBlci5uYXRpdmVFbGVtZW50LnNjcm9sbExlZnQgKyB0aGlzLiNTQ1JPTExfU1RFUCkgPiB0aGlzLmJpenlUYWJzV3JhcHBlci5uYXRpdmVFbGVtZW50LnNjcm9sbFdpZHRoICA/IHRoaXMuYml6eVRhYnNXcmFwcGVyLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsV2lkdGggOiB0aGlzLmJpenlUYWJzV3JhcHBlci5uYXRpdmVFbGVtZW50LnNjcm9sbExlZnQgKyB0aGlzLiNTQ1JPTExfU1RFUDtcbiAgICB0aGlzLiNjaGVja0J1dHRvbnMoKTtcbiAgfVxuXG4gICNjaGVja0J1dHRvbnMoKSB7XG4gICAgdGhpcy5zaG93TGVmdEJ1dHRvbiA9IHRoaXMuYml6eVRhYnNXcmFwcGVyLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCA+IDA7XG4gICAgdGhpcy5zaG93UmlnaHRCdXR0b24gPSAodGhpcy5iaXp5VGFic1dyYXBwZXIubmF0aXZlRWxlbWVudC5zY3JvbGxXaWR0aCAtIHRoaXMuYml6eVRhYnMubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aCkgPiAwICYmICh0aGlzLmJpenlUYWJzV3JhcHBlci5uYXRpdmVFbGVtZW50LnNjcm9sbExlZnQgPCAodGhpcy5iaXp5VGFic1dyYXBwZXIubmF0aXZlRWxlbWVudC5zY3JvbGxXaWR0aCAtIHRoaXMuYml6eVRhYnMubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aCkpO1xuICAgIHRoaXMucmVmLmRldGVjdENoYW5nZXMoKTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuI3N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIHRoaXMuI3Jlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgfVxufSIsIjxkaXYgI2JpenlUYWJzIGNsYXNzPVwiYml6eS10YWJzIHt7Y3VzdG9tQ2xhc3N9fVwiPlxuXG4gICAgPGJ1dHRvbiBcbiAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgIGNsYXNzPVwiYml6eS10YWJzX19zY3JvbGwtYnV0dG9uIGJpenktdGFic19fc2Nyb2xsLWJ1dHRvbi0tbGVmdFwiXG4gICAgICAgICpuZ0lmPVwic2hvd0xlZnRCdXR0b25cIlxuICAgICAgICAoY2xpY2spPVwib25TY3JvbGxMZWZ0KClcIlxuICAgICAgICAoa2V5dXAuZW50ZXIpPVwib25TY3JvbGxMZWZ0KClcIj5cbiAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAzMjAgNTEyXCIgY2xhc3M9XCJiaXp5LXRhYnNfX3Njcm9sbC1idXR0b25fX2Fycm93XCI+XG4gICAgICAgICAgICA8cGF0aCBkPVwiTTkuNCAyMzMuNGMtMTIuNSAxMi41LTEyLjUgMzIuOCAwIDQ1LjNsMTkyIDE5MmMxMi41IDEyLjUgMzIuOCAxMi41IDQ1LjMgMHMxMi41LTMyLjggMC00NS4zTDc3LjMgMjU2IDI0Ni42IDg2LjZjMTIuNS0xMi41IDEyLjUtMzIuOCAwLTQ1LjNzLTMyLjgtMTIuNS00NS4zIDBsLTE5MiAxOTJ6XCIvPlxuICAgICAgICA8L3N2Zz5cbiAgICA8L2J1dHRvbj5cblxuICAgIDxzcGFuIGNsYXNzPVwiYml6eS10YWJzX193cmFwcGVyXCIgI2JpenlUYWJzV3JhcHBlcj5cblxuICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJiaXp5LXRhYlwiPjwvbmctY29udGVudD5cblxuICAgIDwvc3Bhbj5cblxuICAgIDxidXR0b24gXG4gICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICBjbGFzcz1cImJpenktdGFic19fc2Nyb2xsLWJ1dHRvbiBiaXp5LXRhYnNfX3Njcm9sbC1idXR0b24tLXJpZ2h0XCJcbiAgICAgICAgKm5nSWY9XCJzaG93UmlnaHRCdXR0b25cIlxuICAgICAgICAoY2xpY2spPVwib25TY3JvbGxSaWdodCgpXCJcbiAgICAgICAgKGtleXVwLmVudGVyKT1cIm9uU2Nyb2xsUmlnaHQoKVwiPlxuICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDMyMCA1MTJcIiBjbGFzcz1cImJpenktdGFic19fc2Nyb2xsLWJ1dHRvbl9fYXJyb3dcIj5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMzEwLjYgMjMzLjRjMTIuNSAxMi41IDEyLjUgMzIuOCAwIDQ1LjNsLTE5MiAxOTJjLTEyLjUgMTIuNS0zMi44IDEyLjUtNDUuMyAwcy0xMi41LTMyLjggMC00NS4zTDI0Mi43IDI1NiA3My40IDg2LjZjLTEyLjUtMTIuNS0xMi41LTMyLjggMC00NS4zczMyLjgtMTIuNSA0NS4zIDBsMTkyIDE5MnpcIi8+XG4gICAgICAgIDwvc3ZnPlxuICAgIDwvYnV0dG9uPlxuXG48L2Rpdj4iXX0=