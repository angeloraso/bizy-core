import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "@angular/cdk/overlay";
export class ButtonComponent {
    id = `bizy-button-${Math.random()}`;
    disabled = false;
    type = 'button';
    customClass;
    options = [];
    opened = false;
    selected = false;
    onSelect = new EventEmitter();
    _menuWidth;
    selectButton(event) {
        if (!this.options || this.options.length === 0) {
            return;
        }
        this.opened = !this.opened;
        this.selected = !this.selected;
        if (event && event.srcElement && event.srcElement.offsetWidth) {
            this._menuWidth = event.srcElement.offsetWidth;
        }
    }
    selectOption(option, event) {
        if (option.options && option.options.length > 0) {
            if (event && event.srcElement && event.srcElement.offsetWidth) {
                option._menuWidth = event.srcElement.offsetWidth;
            }
            option.opened = !option.opened;
            option.selected = !option.selected;
        }
        else {
            this.closeAll();
        }
        if (option.onSelect) {
            option.onSelect();
        }
    }
    closeAll() {
        this.options.forEach(_option => {
            if (_option.options && _option.options.length > 0) {
                _option.options.forEach(__option => {
                    __option.selected = false;
                    __option.opened = false;
                });
            }
            _option.selected = false;
            _option.opened = false;
        });
    }
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.0.9", ngImport: i0, type: ButtonComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.0.9", type: ButtonComponent, selector: "bizy-button", inputs: { id: "id", disabled: "disabled", type: "type", customClass: "customClass", options: "options", opened: "opened", selected: "selected" }, outputs: { onSelect: "onSelect" }, ngImport: i0, template: "<button \n    [type]=\"type\"\n    id=\"{{id}}\"\n    [disabled]=\"disabled\"\n    class=\"bizy-button {{customClass}}\"\n    [ngClass]=\"{'bizy-toolbar__option--opened': opened, 'bizy-toolbar__option--selected': selected}\"\n    (click)=\"onSelect.emit($event); selectButton($event)\"\n    (keyup.enter)=\"onSelect.emit($event); selectButton($event)\"\n    cdkOverlayOrigin \n    #bizyButtonTrigger=\"cdkOverlayOrigin\">\n    <span class=\"bizy-button__content\">\n        <ng-content></ng-content>\n    </span>\n\n    <svg \n        *ngIf=\"options && options.length > 0\" \n        class=\"bizy-button__option__content bizy-button__svg\"\n        [ngClass]=\"{'bizy-button--opened': opened, 'bizy-button--closed': !opened}\"\n        viewBox=\"0 0 48 48\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M33.17 17.17l-9.17 9.17-9.17-9.17-2.83 2.83 12 12 12-12z\"/>\n        <path d=\"M0 0h48v48h-48z\" fill=\"none\"/>\n    </svg>\n\n</button>\n\n<ng-template\n    cdkConnectedOverlay\n    [cdkConnectedOverlayMinWidth]=\"_menuWidth\"\n    (overlayOutsideClick)=\"closeAll();\"\n    [cdkConnectedOverlayOrigin]=\"bizyButtonTrigger\"\n    [cdkConnectedOverlayOpen]=\"opened\">\n    <span class=\"bizy-button__option-menu\">\n\n        <ng-container *ngFor=\"let option of options\">\n\n            <button \n                cdkOverlayOrigin #subOptionTrigger=\"cdkOverlayOrigin\"\n                type=\"button\"\n                class=\"bizy-button__option\"\n                [ngClass]=\"{'bizy-button__option--opened': option.opened, 'bizy-button__option--selected': option.selected}\"\n                (click)=\"selectOption(option, $event)\"\n                (keyup.enter)=\"selectOption(option, $event)\">\n                <span class=\"bizy-button__content\">\n\n                    <div \n                        *ngIf=\"option.icon\"\n                        class=\"bizy-button__option__content\"\n                        [customClass]=\"option.customClass\"\n                        [innerHTML]=\"option.icon\">\n                    </div>\n\n                    <h4 *ngIf=\"option.label\" class=\"bizy-button__option__content bizy-button__option__label\">{{option.label}}</h4>\n                </span>\n\n                <svg \n                    *ngIf=\"option.options && option.options.length > 0\"\n                    class=\"bizy-button__option__content bizy-button__svg\"\n                    [ngClass]=\"{'bizy-button--opened': option.opened, 'bizy-button--closed': !option.opened}\"\n                    viewBox=\"0 0 48 48\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M33.17 17.17l-9.17 9.17-9.17-9.17-2.83 2.83 12 12 12-12z\"/>\n                    <path d=\"M0 0h48v48h-48z\" fill=\"none\"/>\n                </svg>\n\n            </button>\n    \n            <ng-template\n                cdkConnectedOverlay\n                [cdkConnectedOverlayMinWidth]=\"option._menuWidth\"\n                [cdkConnectedOverlayOrigin]=\"subOptionTrigger\"\n                [cdkConnectedOverlayOpen]=\"option.opened\">\n                <span class=\"bizy-button__option-menu\">\n    \n                    <ng-container *ngFor=\"let _option of option.options\">\n\n                        <button \n                            type=\"button\"\n                            class=\"bizy-button__option\"\n                            (click)=\"selectOption(_option, $event)\"\n                            (keyup.enter)=\"selectOption(_option, $event)\">\n                            <span class=\"bizy-button__content\">\n\n                                <div \n                                    *ngIf=\"_option.icon\"\n                                    class=\"bizy-button__option__content\"\n                                    [customClass]=\"_option.customClass\"\n                                    [innerHTML]=\"_option.icon\">\n                                </div>\n\n                                <h4 *ngIf=\"_option.label\" class=\"bizy-button__option__content bizy-button__option__label\">{{_option.label}}</h4>\n                            </span>\n                        </button>\n                \n                    </ng-container>\n                    \n                </span>\n            </ng-template>\n    \n        </ng-container>\n\n    </span>\n</ng-template>\n", styles: [".bizy-button{display:flex;justify-content:space-between;align-items:center;column-gap:.5rem;width:max-content;padding:.6rem .8rem;border-radius:.3rem;color:#fff;border:none;cursor:pointer}.bizy-button:hover{filter:brightness(95%)}.bizy-button:disabled{opacity:.6;cursor:not-allowed;background-color:inherit}.bizy-button__content{width:100%;display:flex;column-gap:.3rem;pointer-events:none}.bizy-button--opened{transition:transform .2s;transform:rotate(180deg)}.bizy-button--closed{transition:transform .2s}.bizy-button__option{border:none;height:100%;display:flex;align-items:center;justify-content:space-between;column-gap:.5rem;padding:.5rem;cursor:pointer;color:var(--bizy-button-option-color)!important;background-color:var(--bizy-button-option-background-color)!important}.bizy-button__option__content{pointer-events:none}.bizy-button__svg{height:1rem}.bizy-button__option__label{color:var(--bizy-button-option-color)!important}.bizy-button__option:hover:not(.bizy-button__option--selected){color:var(--bizy-button-option-hover-color)!important;background-color:var(--bizy-button-option-hover-background-color)!important}.bizy-button__option:hover:not(.bizy-button__option--selected) .bizy-button__option__label{color:var(--bizy-button-option-hover-color)!important}.bizy-button__option--opened:not(.bizy-button__option--selected){color:var(--bizy-button-option-hover-color)!important;background-color:var(--bizy-button-option-hover-background-color)!important}.bizy-button__option--opened:not(.bizy-button__option--selected) .bizy-button__option__label{color:var(--bizy-button-option-hover-color)!important}.bizy-button__option--selected{color:var(--bizy-button-option-selected-color)!important;background-color:var(--bizy-button-option-selected-background-color)!important}.bizy-button__option--selected .bizy-button__option__label{color:var(--bizy-button-option-selected-color)!important}.bizy-button__option-menu{background-color:var(--bizy-button-option-hover-background-color)!important;display:flex;flex-direction:column;row-gap:.3rem;align-items:flex-start;width:100%;min-width:-moz-fit-content;min-width:fit-content;border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem;margin-top:.2rem}.bizy-button__option-menu .bizy-button__option{width:100%!important;border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem}.bizy-button__option-menu .bizy-button__option:not(.bizy-button__option--selected){color:var(--bizy-button-option-hover-color)!important;background-color:transparent!important}.bizy-button__option-menu .bizy-button__option:not(.bizy-button__option--selected) .bizy-button__option__label{color:var(--bizy-button-option-hover-color)!important}\n"], dependencies: [{ kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.CdkConnectedOverlay, selector: "[cdk-connected-overlay], [connected-overlay], [cdkConnectedOverlay]", inputs: ["cdkConnectedOverlayOrigin", "cdkConnectedOverlayPositions", "cdkConnectedOverlayPositionStrategy", "cdkConnectedOverlayOffsetX", "cdkConnectedOverlayOffsetY", "cdkConnectedOverlayWidth", "cdkConnectedOverlayHeight", "cdkConnectedOverlayMinWidth", "cdkConnectedOverlayMinHeight", "cdkConnectedOverlayBackdropClass", "cdkConnectedOverlayPanelClass", "cdkConnectedOverlayViewportMargin", "cdkConnectedOverlayScrollStrategy", "cdkConnectedOverlayOpen", "cdkConnectedOverlayDisableClose", "cdkConnectedOverlayTransformOriginOn", "cdkConnectedOverlayHasBackdrop", "cdkConnectedOverlayLockPosition", "cdkConnectedOverlayFlexibleDimensions", "cdkConnectedOverlayGrowAfterOpen", "cdkConnectedOverlayPush", "cdkConnectedOverlayDisposeOnNavigation"], outputs: ["backdropClick", "positionChange", "attach", "detach", "overlayKeydown", "overlayOutsideClick"], exportAs: ["cdkConnectedOverlay"] }, { kind: "directive", type: i2.CdkOverlayOrigin, selector: "[cdk-overlay-origin], [overlay-origin], [cdkOverlayOrigin]", exportAs: ["cdkOverlayOrigin"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.0.9", ngImport: i0, type: ButtonComponent, decorators: [{
            type: Component,
            args: [{ selector: 'bizy-button', changeDetection: ChangeDetectionStrategy.OnPush, template: "<button \n    [type]=\"type\"\n    id=\"{{id}}\"\n    [disabled]=\"disabled\"\n    class=\"bizy-button {{customClass}}\"\n    [ngClass]=\"{'bizy-toolbar__option--opened': opened, 'bizy-toolbar__option--selected': selected}\"\n    (click)=\"onSelect.emit($event); selectButton($event)\"\n    (keyup.enter)=\"onSelect.emit($event); selectButton($event)\"\n    cdkOverlayOrigin \n    #bizyButtonTrigger=\"cdkOverlayOrigin\">\n    <span class=\"bizy-button__content\">\n        <ng-content></ng-content>\n    </span>\n\n    <svg \n        *ngIf=\"options && options.length > 0\" \n        class=\"bizy-button__option__content bizy-button__svg\"\n        [ngClass]=\"{'bizy-button--opened': opened, 'bizy-button--closed': !opened}\"\n        viewBox=\"0 0 48 48\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M33.17 17.17l-9.17 9.17-9.17-9.17-2.83 2.83 12 12 12-12z\"/>\n        <path d=\"M0 0h48v48h-48z\" fill=\"none\"/>\n    </svg>\n\n</button>\n\n<ng-template\n    cdkConnectedOverlay\n    [cdkConnectedOverlayMinWidth]=\"_menuWidth\"\n    (overlayOutsideClick)=\"closeAll();\"\n    [cdkConnectedOverlayOrigin]=\"bizyButtonTrigger\"\n    [cdkConnectedOverlayOpen]=\"opened\">\n    <span class=\"bizy-button__option-menu\">\n\n        <ng-container *ngFor=\"let option of options\">\n\n            <button \n                cdkOverlayOrigin #subOptionTrigger=\"cdkOverlayOrigin\"\n                type=\"button\"\n                class=\"bizy-button__option\"\n                [ngClass]=\"{'bizy-button__option--opened': option.opened, 'bizy-button__option--selected': option.selected}\"\n                (click)=\"selectOption(option, $event)\"\n                (keyup.enter)=\"selectOption(option, $event)\">\n                <span class=\"bizy-button__content\">\n\n                    <div \n                        *ngIf=\"option.icon\"\n                        class=\"bizy-button__option__content\"\n                        [customClass]=\"option.customClass\"\n                        [innerHTML]=\"option.icon\">\n                    </div>\n\n                    <h4 *ngIf=\"option.label\" class=\"bizy-button__option__content bizy-button__option__label\">{{option.label}}</h4>\n                </span>\n\n                <svg \n                    *ngIf=\"option.options && option.options.length > 0\"\n                    class=\"bizy-button__option__content bizy-button__svg\"\n                    [ngClass]=\"{'bizy-button--opened': option.opened, 'bizy-button--closed': !option.opened}\"\n                    viewBox=\"0 0 48 48\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M33.17 17.17l-9.17 9.17-9.17-9.17-2.83 2.83 12 12 12-12z\"/>\n                    <path d=\"M0 0h48v48h-48z\" fill=\"none\"/>\n                </svg>\n\n            </button>\n    \n            <ng-template\n                cdkConnectedOverlay\n                [cdkConnectedOverlayMinWidth]=\"option._menuWidth\"\n                [cdkConnectedOverlayOrigin]=\"subOptionTrigger\"\n                [cdkConnectedOverlayOpen]=\"option.opened\">\n                <span class=\"bizy-button__option-menu\">\n    \n                    <ng-container *ngFor=\"let _option of option.options\">\n\n                        <button \n                            type=\"button\"\n                            class=\"bizy-button__option\"\n                            (click)=\"selectOption(_option, $event)\"\n                            (keyup.enter)=\"selectOption(_option, $event)\">\n                            <span class=\"bizy-button__content\">\n\n                                <div \n                                    *ngIf=\"_option.icon\"\n                                    class=\"bizy-button__option__content\"\n                                    [customClass]=\"_option.customClass\"\n                                    [innerHTML]=\"_option.icon\">\n                                </div>\n\n                                <h4 *ngIf=\"_option.label\" class=\"bizy-button__option__content bizy-button__option__label\">{{_option.label}}</h4>\n                            </span>\n                        </button>\n                \n                    </ng-container>\n                    \n                </span>\n            </ng-template>\n    \n        </ng-container>\n\n    </span>\n</ng-template>\n", styles: [".bizy-button{display:flex;justify-content:space-between;align-items:center;column-gap:.5rem;width:max-content;padding:.6rem .8rem;border-radius:.3rem;color:#fff;border:none;cursor:pointer}.bizy-button:hover{filter:brightness(95%)}.bizy-button:disabled{opacity:.6;cursor:not-allowed;background-color:inherit}.bizy-button__content{width:100%;display:flex;column-gap:.3rem;pointer-events:none}.bizy-button--opened{transition:transform .2s;transform:rotate(180deg)}.bizy-button--closed{transition:transform .2s}.bizy-button__option{border:none;height:100%;display:flex;align-items:center;justify-content:space-between;column-gap:.5rem;padding:.5rem;cursor:pointer;color:var(--bizy-button-option-color)!important;background-color:var(--bizy-button-option-background-color)!important}.bizy-button__option__content{pointer-events:none}.bizy-button__svg{height:1rem}.bizy-button__option__label{color:var(--bizy-button-option-color)!important}.bizy-button__option:hover:not(.bizy-button__option--selected){color:var(--bizy-button-option-hover-color)!important;background-color:var(--bizy-button-option-hover-background-color)!important}.bizy-button__option:hover:not(.bizy-button__option--selected) .bizy-button__option__label{color:var(--bizy-button-option-hover-color)!important}.bizy-button__option--opened:not(.bizy-button__option--selected){color:var(--bizy-button-option-hover-color)!important;background-color:var(--bizy-button-option-hover-background-color)!important}.bizy-button__option--opened:not(.bizy-button__option--selected) .bizy-button__option__label{color:var(--bizy-button-option-hover-color)!important}.bizy-button__option--selected{color:var(--bizy-button-option-selected-color)!important;background-color:var(--bizy-button-option-selected-background-color)!important}.bizy-button__option--selected .bizy-button__option__label{color:var(--bizy-button-option-selected-color)!important}.bizy-button__option-menu{background-color:var(--bizy-button-option-hover-background-color)!important;display:flex;flex-direction:column;row-gap:.3rem;align-items:flex-start;width:100%;min-width:-moz-fit-content;min-width:fit-content;border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem;margin-top:.2rem}.bizy-button__option-menu .bizy-button__option{width:100%!important;border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem}.bizy-button__option-menu .bizy-button__option:not(.bizy-button__option--selected){color:var(--bizy-button-option-hover-color)!important;background-color:transparent!important}.bizy-button__option-menu .bizy-button__option:not(.bizy-button__option--selected) .bizy-button__option__label{color:var(--bizy-button-option-hover-color)!important}\n"] }]
        }], propDecorators: { id: [{
                type: Input
            }], disabled: [{
                type: Input
            }], type: [{
                type: Input
            }], customClass: [{
                type: Input
            }], options: [{
                type: Input
            }], opened: [{
                type: Input
            }], selected: [{
                type: Input
            }], onSelect: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbXBvbmVudHMvc3JjL2xpYi9idXR0b24vYnV0dG9uLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbXBvbmVudHMvc3JjL2xpYi9idXR0b24vYnV0dG9uLmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQzs7OztBQVNoRyxNQUFNLE9BQU8sZUFBZTtJQUNqQixFQUFFLEdBQVcsZUFBZSxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQTtJQUMzQyxRQUFRLEdBQVksS0FBSyxDQUFDO0lBQzFCLElBQUksR0FBd0IsUUFBUSxDQUFDO0lBQ3JDLFdBQVcsQ0FBUztJQUNwQixPQUFPLEdBQXlCLEVBQUUsQ0FBQztJQUNuQyxNQUFNLEdBQVksS0FBSyxDQUFDO0lBQ3hCLFFBQVEsR0FBWSxLQUFLLENBQUM7SUFDekIsUUFBUSxHQUFHLElBQUksWUFBWSxFQUFTLENBQUM7SUFFL0MsVUFBVSxDQUFTO0lBRW5CLFlBQVksQ0FBQyxLQUFVO1FBQ3JCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUM5QyxPQUFPO1NBQ1I7UUFFRCxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUMzQixJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUUvQixJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsVUFBVSxJQUFJLEtBQUssQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFO1lBQzdELElBQUksQ0FBQyxVQUFVLEdBQUksS0FBSyxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUM7U0FDakQ7SUFDSCxDQUFDO0lBRUQsWUFBWSxDQUFDLE1BQXFCLEVBQUUsS0FBVTtRQUM1QyxJQUFJLE1BQU0sQ0FBQyxPQUFPLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQy9DLElBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxVQUFVLElBQUksS0FBSyxDQUFDLFVBQVUsQ0FBQyxXQUFXLEVBQUU7Z0JBQzdELE1BQU0sQ0FBQyxVQUFVLEdBQUksS0FBSyxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUM7YUFDbkQ7WUFFRCxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztZQUMvQixNQUFNLENBQUMsUUFBUSxHQUFHLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztTQUNwQzthQUFNO1lBQ0wsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1NBQ2pCO1FBRUQsSUFBSSxNQUFNLENBQUMsUUFBUSxFQUFFO1lBQ25CLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQztTQUNuQjtJQUNILENBQUM7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDN0IsSUFBSSxPQUFPLENBQUMsT0FBTyxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQkFDakQsT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7b0JBQ2pDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO29CQUMxQixRQUFRLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztnQkFDMUIsQ0FBQyxDQUFDLENBQUE7YUFDSDtZQUVELE9BQU8sQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1lBQ3pCLE9BQU8sQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQzt1R0F0RFUsZUFBZTsyRkFBZixlQUFlLHdPQ1Q1QixzdklBcUdBOzsyRkQ1RmEsZUFBZTtrQkFOM0IsU0FBUzsrQkFDRSxhQUFhLG1CQUdOLHVCQUF1QixDQUFDLE1BQU07OEJBR3RDLEVBQUU7c0JBQVYsS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLO2dCQUNHLElBQUk7c0JBQVosS0FBSztnQkFDRyxXQUFXO3NCQUFuQixLQUFLO2dCQUNHLE9BQU87c0JBQWYsS0FBSztnQkFDRyxNQUFNO3NCQUFkLEtBQUs7Z0JBQ0csUUFBUTtzQkFBaEIsS0FBSztnQkFDSSxRQUFRO3NCQUFqQixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBJQnV0dG9uT3B0aW9uIH0gZnJvbSAnLi9idXR0b24udHlwZXMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdiaXp5LWJ1dHRvbicsXG4gIHRlbXBsYXRlVXJsOiAnLi9idXR0b24uaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2J1dHRvbi5jc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5leHBvcnQgY2xhc3MgQnV0dG9uQ29tcG9uZW50IHtcbiAgQElucHV0KCkgaWQ6IHN0cmluZyA9IGBiaXp5LWJ1dHRvbi0ke01hdGgucmFuZG9tKCl9YFxuICBASW5wdXQoKSBkaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXQoKSB0eXBlOiAnYnV0dG9uJyB8ICdzdWJtaXQnID0gJ2J1dHRvbic7XG4gIEBJbnB1dCgpIGN1c3RvbUNsYXNzOiBzdHJpbmc7XG4gIEBJbnB1dCgpIG9wdGlvbnM6IEFycmF5PElCdXR0b25PcHRpb24+ID0gW107XG4gIEBJbnB1dCgpIG9wZW5lZDogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXQoKSBzZWxlY3RlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBAT3V0cHV0KCkgb25TZWxlY3QgPSBuZXcgRXZlbnRFbWl0dGVyPEV2ZW50PigpO1xuXG4gIF9tZW51V2lkdGg6IG51bWJlcjtcblxuICBzZWxlY3RCdXR0b24oZXZlbnQ6IGFueSkge1xuICAgIGlmICghdGhpcy5vcHRpb25zIHx8IHRoaXMub3B0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm9wZW5lZCA9ICF0aGlzLm9wZW5lZDtcbiAgICB0aGlzLnNlbGVjdGVkID0gIXRoaXMuc2VsZWN0ZWQ7XG5cbiAgICBpZiAoZXZlbnQgJiYgZXZlbnQuc3JjRWxlbWVudCAmJiBldmVudC5zcmNFbGVtZW50Lm9mZnNldFdpZHRoKSB7XG4gICAgICB0aGlzLl9tZW51V2lkdGggPSAgZXZlbnQuc3JjRWxlbWVudC5vZmZzZXRXaWR0aDsgXG4gICAgfVxuICB9XG5cbiAgc2VsZWN0T3B0aW9uKG9wdGlvbjogSUJ1dHRvbk9wdGlvbiwgZXZlbnQ6IGFueSkge1xuICAgIGlmIChvcHRpb24ub3B0aW9ucyAmJiBvcHRpb24ub3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoZXZlbnQgJiYgZXZlbnQuc3JjRWxlbWVudCAmJiBldmVudC5zcmNFbGVtZW50Lm9mZnNldFdpZHRoKSB7XG4gICAgICAgIG9wdGlvbi5fbWVudVdpZHRoID0gIGV2ZW50LnNyY0VsZW1lbnQub2Zmc2V0V2lkdGg7IFxuICAgICAgfVxuXG4gICAgICBvcHRpb24ub3BlbmVkID0gIW9wdGlvbi5vcGVuZWQ7XG4gICAgICBvcHRpb24uc2VsZWN0ZWQgPSAhb3B0aW9uLnNlbGVjdGVkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsb3NlQWxsKCk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbi5vblNlbGVjdCkge1xuICAgICAgb3B0aW9uLm9uU2VsZWN0KCk7XG4gICAgfVxuICB9XG5cbiAgY2xvc2VBbGwoKSB7XG4gICAgdGhpcy5vcHRpb25zLmZvckVhY2goX29wdGlvbiA9PiB7XG4gICAgICBpZiAoX29wdGlvbi5vcHRpb25zICYmIF9vcHRpb24ub3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIF9vcHRpb24ub3B0aW9ucy5mb3JFYWNoKF9fb3B0aW9uID0+IHtcbiAgICAgICAgICBfX29wdGlvbi5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgIF9fb3B0aW9uLm9wZW5lZCA9IGZhbHNlO1xuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBfb3B0aW9uLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICBfb3B0aW9uLm9wZW5lZCA9IGZhbHNlO1xuICAgIH0pICBcbiAgfVxufSIsIjxidXR0b24gXG4gICAgW3R5cGVdPVwidHlwZVwiXG4gICAgaWQ9XCJ7e2lkfX1cIlxuICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgY2xhc3M9XCJiaXp5LWJ1dHRvbiB7e2N1c3RvbUNsYXNzfX1cIlxuICAgIFtuZ0NsYXNzXT1cInsnYml6eS10b29sYmFyX19vcHRpb24tLW9wZW5lZCc6IG9wZW5lZCwgJ2JpenktdG9vbGJhcl9fb3B0aW9uLS1zZWxlY3RlZCc6IHNlbGVjdGVkfVwiXG4gICAgKGNsaWNrKT1cIm9uU2VsZWN0LmVtaXQoJGV2ZW50KTsgc2VsZWN0QnV0dG9uKCRldmVudClcIlxuICAgIChrZXl1cC5lbnRlcik9XCJvblNlbGVjdC5lbWl0KCRldmVudCk7IHNlbGVjdEJ1dHRvbigkZXZlbnQpXCJcbiAgICBjZGtPdmVybGF5T3JpZ2luIFxuICAgICNiaXp5QnV0dG9uVHJpZ2dlcj1cImNka092ZXJsYXlPcmlnaW5cIj5cbiAgICA8c3BhbiBjbGFzcz1cImJpenktYnV0dG9uX19jb250ZW50XCI+XG4gICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICA8L3NwYW4+XG5cbiAgICA8c3ZnIFxuICAgICAgICAqbmdJZj1cIm9wdGlvbnMgJiYgb3B0aW9ucy5sZW5ndGggPiAwXCIgXG4gICAgICAgIGNsYXNzPVwiYml6eS1idXR0b25fX29wdGlvbl9fY29udGVudCBiaXp5LWJ1dHRvbl9fc3ZnXCJcbiAgICAgICAgW25nQ2xhc3NdPVwieydiaXp5LWJ1dHRvbi0tb3BlbmVkJzogb3BlbmVkLCAnYml6eS1idXR0b24tLWNsb3NlZCc6ICFvcGVuZWR9XCJcbiAgICAgICAgdmlld0JveD1cIjAgMCA0OCA0OFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbiAgICAgICAgPHBhdGggZD1cIk0zMy4xNyAxNy4xN2wtOS4xNyA5LjE3LTkuMTctOS4xNy0yLjgzIDIuODMgMTIgMTIgMTItMTJ6XCIvPlxuICAgICAgICA8cGF0aCBkPVwiTTAgMGg0OHY0OGgtNDh6XCIgZmlsbD1cIm5vbmVcIi8+XG4gICAgPC9zdmc+XG5cbjwvYnV0dG9uPlxuXG48bmctdGVtcGxhdGVcbiAgICBjZGtDb25uZWN0ZWRPdmVybGF5XG4gICAgW2Nka0Nvbm5lY3RlZE92ZXJsYXlNaW5XaWR0aF09XCJfbWVudVdpZHRoXCJcbiAgICAob3ZlcmxheU91dHNpZGVDbGljayk9XCJjbG9zZUFsbCgpO1wiXG4gICAgW2Nka0Nvbm5lY3RlZE92ZXJsYXlPcmlnaW5dPVwiYml6eUJ1dHRvblRyaWdnZXJcIlxuICAgIFtjZGtDb25uZWN0ZWRPdmVybGF5T3Blbl09XCJvcGVuZWRcIj5cbiAgICA8c3BhbiBjbGFzcz1cImJpenktYnV0dG9uX19vcHRpb24tbWVudVwiPlxuXG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IG9wdGlvbiBvZiBvcHRpb25zXCI+XG5cbiAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgY2RrT3ZlcmxheU9yaWdpbiAjc3ViT3B0aW9uVHJpZ2dlcj1cImNka092ZXJsYXlPcmlnaW5cIlxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiYml6eS1idXR0b25fX29wdGlvblwiXG4gICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwieydiaXp5LWJ1dHRvbl9fb3B0aW9uLS1vcGVuZWQnOiBvcHRpb24ub3BlbmVkLCAnYml6eS1idXR0b25fX29wdGlvbi0tc2VsZWN0ZWQnOiBvcHRpb24uc2VsZWN0ZWR9XCJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwic2VsZWN0T3B0aW9uKG9wdGlvbiwgJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgKGtleXVwLmVudGVyKT1cInNlbGVjdE9wdGlvbihvcHRpb24sICRldmVudClcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJpenktYnV0dG9uX19jb250ZW50XCI+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICAgICAgICAgICpuZ0lmPVwib3B0aW9uLmljb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJiaXp5LWJ1dHRvbl9fb3B0aW9uX19jb250ZW50XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtjdXN0b21DbGFzc109XCJvcHRpb24uY3VzdG9tQ2xhc3NcIlxuICAgICAgICAgICAgICAgICAgICAgICAgW2lubmVySFRNTF09XCJvcHRpb24uaWNvblwiPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICA8aDQgKm5nSWY9XCJvcHRpb24ubGFiZWxcIiBjbGFzcz1cImJpenktYnV0dG9uX19vcHRpb25fX2NvbnRlbnQgYml6eS1idXR0b25fX29wdGlvbl9fbGFiZWxcIj57e29wdGlvbi5sYWJlbH19PC9oND5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG5cbiAgICAgICAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgICAgICAgICAqbmdJZj1cIm9wdGlvbi5vcHRpb25zICYmIG9wdGlvbi5vcHRpb25zLmxlbmd0aCA+IDBcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJpenktYnV0dG9uX19vcHRpb25fX2NvbnRlbnQgYml6eS1idXR0b25fX3N2Z1wiXG4gICAgICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsnYml6eS1idXR0b24tLW9wZW5lZCc6IG9wdGlvbi5vcGVuZWQsICdiaXp5LWJ1dHRvbi0tY2xvc2VkJzogIW9wdGlvbi5vcGVuZWR9XCJcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCA0OCA0OFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD1cIk0zMy4xNyAxNy4xN2wtOS4xNyA5LjE3LTkuMTctOS4xNy0yLjgzIDIuODMgMTIgMTIgMTItMTJ6XCIvPlxuICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTAgMGg0OHY0OGgtNDh6XCIgZmlsbD1cIm5vbmVcIi8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgIFxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlXG4gICAgICAgICAgICAgICAgY2RrQ29ubmVjdGVkT3ZlcmxheVxuICAgICAgICAgICAgICAgIFtjZGtDb25uZWN0ZWRPdmVybGF5TWluV2lkdGhdPVwib3B0aW9uLl9tZW51V2lkdGhcIlxuICAgICAgICAgICAgICAgIFtjZGtDb25uZWN0ZWRPdmVybGF5T3JpZ2luXT1cInN1Yk9wdGlvblRyaWdnZXJcIlxuICAgICAgICAgICAgICAgIFtjZGtDb25uZWN0ZWRPdmVybGF5T3Blbl09XCJvcHRpb24ub3BlbmVkXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJiaXp5LWJ1dHRvbl9fb3B0aW9uLW1lbnVcIj5cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgX29wdGlvbiBvZiBvcHRpb24ub3B0aW9uc1wiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYml6eS1idXR0b25fX29wdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNsaWNrKT1cInNlbGVjdE9wdGlvbihfb3B0aW9uLCAkZXZlbnQpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoa2V5dXAuZW50ZXIpPVwic2VsZWN0T3B0aW9uKF9vcHRpb24sICRldmVudClcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJpenktYnV0dG9uX19jb250ZW50XCI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpuZ0lmPVwiX29wdGlvbi5pY29uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYml6eS1idXR0b25fX29wdGlvbl9fY29udGVudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbY3VzdG9tQ2xhc3NdPVwiX29wdGlvbi5jdXN0b21DbGFzc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaW5uZXJIVE1MXT1cIl9vcHRpb24uaWNvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgKm5nSWY9XCJfb3B0aW9uLmxhYmVsXCIgY2xhc3M9XCJiaXp5LWJ1dHRvbl9fb3B0aW9uX19jb250ZW50IGJpenktYnV0dG9uX19vcHRpb25fX2xhYmVsXCI+e3tfb3B0aW9uLmxhYmVsfX08L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICBcbiAgICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICA8L3NwYW4+XG48L25nLXRlbXBsYXRlPlxuIl19